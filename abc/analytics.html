<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classroom Observation - Phân Tích</title>
    <link rel="stylesheet" href="analytics.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div id="notificationContainer" class="notification-container"></div>

<div class="app-container">
    <header class="navbar">
        <div class="logo">
            <i class="fas fa-chalkboard-teacher"></i>
            <span>Classroom Observation</span>
            <span class="subtitle">Real-time monitoring & analysis</span>
        </div>
        <nav class="nav-links">
                <a href="index.html" class="nav-item active">
                    <i class="fas fa-home"></i>
                    <span>Trang Chủ</span>
                </a>
                <a href="analytics.html" class="nav-item">
                    <i class="fas fa-chart-bar"></i>
                    <span>Phân Tích</span>
                </a>
                <a href="ai_assistant.html" class="nav-item">
                    <i class="fas fa-robot"></i>
                    <span>Trợ Lý AI</span>
                </a>
                <a href="live_video.html" class="nav-item">
                    <i class="fas fa-video"></i>
                    <span>Live Feed</span>
                </a>
                <a href="live.html" class="nav-item">
                    <i class="fas fa-video"></i>
                    <span>Live</span>
                </a>
                <a href="start_class.html" class="nav-item">
                    <i class="fas fa-video"></i>
                    <span>Star Class</span>
                </a>
            </nav>
        <div class="user-actions">
            <a href="#" class="nav-item"><i class="fas fa-user-circle"></i><span>Tài Khoản</span></a>
            <div class="theme-toggle"><i class="fas fa-sun"></i></div>
        </div>
    </header>

    <!-- TAB BUTTONS -->
    <div class="tabs-container">
        <button class="tab-button active" onclick="openTab('infoTab')">Thông tin lớp học</button>
        <button class="tab-button" onclick="openTab('statusTab')">Tình trạng lớp học</button>
    </div>

    <main class="main-content analytics-dashboard">
        <!-- TAB 1: Thông tin lớp học -->
        <div id="infoTab" class="tab-content">
            <div class="chart-container">
                <h2 class="chart-title">Số lượng học sinh theo lớp</h2>
                <canvas id="studentsChart"></canvas>
            </div>

            <div class="chart-container">
                <h2 class="chart-title">Điểm trung bình / Hoạt động lớp</h2>
                <canvas id="averageChart"></canvas>
            </div>
        </div>

        <!-- TAB 2: Tình trạng lớp học -->
        <div id="statusTab" class="tab-content" style="display:none;">
            <div class="chart-container">
                <h2 class="chart-title">Tình trạng lớp học</h2>
                <canvas id="statusPieChart"></canvas>
            </div>
        </div>
    </main>
</div>

<script>
function openTab(tabId) {
    const tabs = document.querySelectorAll('.tab-content');
    tabs.forEach(tab => tab.style.display = 'none');
    document.getElementById(tabId).style.display = 'block';

    const buttons = document.querySelectorAll('.tab-button');
    buttons.forEach(btn => btn.classList.remove('active'));
    event.currentTarget.classList.add('active');
}

// --- Chart.js ---
const studentsCtx = document.getElementById('studentsChart').getContext('2d');
const studentsChart = new Chart(studentsCtx, {
    type: 'bar',
    data: {
        labels: ['10A1','10B1','11A1','11B1','12A1'],
        datasets: [{
            label: 'Số lượng học sinh',
            data: [35, 28, 32, 25, 20],
            backgroundColor: '#4a55a8'
        }]
    },
    options: {
        responsive:true,
        plugins: { legend:{ display:false } },
        scales: {
            y: { beginAtZero:true }
        }
    }
});

const averageCtx = document.getElementById('averageChart').getContext('2d');
const averageChart = new Chart(averageCtx, {
    type: 'bar',
    data: {
        labels: ['10A1','10B1','11A1','11B1','12A1'],
        datasets: [
            { label:'Điểm trung bình', data:[8,7,9,6,8], backgroundColor:'#f97316' },
            { label:'Hoạt động lớp', data:[6,5,7,6,7], backgroundColor:'#a855f7' }
        ]
    },
    options: {
        responsive:true,
        plugins:{ legend:{ position:'top', labels:{color:'#f3f4f6'} } },
        scales:{
            y:{ beginAtZero:true, ticks:{color:'#f3f4f6'} },
            x:{ ticks:{color:'#f3f4f6'} }
        }
    }
});

const statusCtx = document.getElementById('statusPieChart').getContext('2d');
const statusPieChart = new Chart(statusCtx, {
    type: 'pie',
    data: {
        labels: ['Đang học','Vắng','Chậm trễ','Offline'],
        datasets:[{
            data: [60,10,20,10],
            backgroundColor:['#10b981','#ef4444','#f97316','#6b7280']
        }]
    },
    options:{
        responsive:true,
        plugins:{ legend:{ position:'bottom', labels:{color:'#f3f4f6'} } }
    }
});
</script>
</body>
</html>
